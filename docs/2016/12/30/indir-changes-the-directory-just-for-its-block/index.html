<!--

This is the post template

{
  "author" => "brian",
  "categories" => "files-directories",
  "config" => {
    "base_dir" => "docs",
    "category_dir" => "category",
    "cname" => "test.learningraku.com",
    "default_test" => "abc",
    "items_json" => "docs/items.json",
    "last" => undef,
    "recent_items" => 5,
    "site_title" => "Learning Raku",
    "static_dir" => "_static",
    "tag_dir" => "tag",
    "template" => "default",
    "template_dir" => "_templates"
  },
  "date" => "2016-12-30 23:15:57",
  "file" => "_posts/2016-12-30-indir-changes-the-directory-just-for-its-block.html",
  "link" => "http://www.learningraku.com/2016/12/30/indir-changes-the-directory-just-for-its-block/",
  "local_path" => "docs/2016/12/30/indir-changes-the-directory-just-for-its-block/index.html",
  "post_epoch" => 1483139757,
  "post_id" => 261,
  "post_name" => "indir-changes-the-directory-just-for-its-block",
  "processing_datestr" => "Sun Apr  4 19:23:42 2021",
  "processing_epoch" => 1617578622,
  "source_file" => "_posts/2016-12-30-indir-changes-the-directory-just-for-its-block.html",
  "status" => "publish",
  "tags" => "",
  "title" => "indir() changes the directory just for its block",
  "type" => "post",
  "web_path" => bless( {
    "path" => "/2016/12/30/indir-changes-the-directory-just-for-its-block/"
  }, 'Mojo::Path' )
}

-->

<!-- start post -->

<html>

<head>
	<base href="https://test.learningraku.com/">
	<title>indir() changes the directory just for its block</title>
	<link rel="stylesheet" href="/style.css">
	<meta name="generator" content="brian's site generator" />
	<meta charset="UTF-8" />
</head>

<body>
<div id="page">

<!-- start top -->
<div id="top">
<a href="/">Home</a> •
<a href="/about/">About</a> •
<a href="/book/">Book</a> •
<a href="/downloads/">Downloads</a> •
<a href="/feed/">Feed</a>
</div>
<!-- end top -->

<div id="middle">

<div id="sidebar">
<img id="small_cover" src="images/cover.png" width="180" height="236" />

<div id="sponsors">
<p>Github sponsors</p>
</div>

<h2 class="sidebar">Links</h2>

<div class="textwidget"><p><a href="https://www.oreilly.com/catalog/errata.csp?isbn=0636920062776">Book errata</a><br />
<a href="https://goo.gl/EbA7gF">Google Books preview</a><br />
<a href="http://shop.oreilly.com/product/0636920062776.do">O&#8217;Reilly Media listing</a></p>
<hr />
<p><i>Many resources have not changed the name from Perl 6 to Raku, so these resources may use either.</i></p>
<p><a href="https://design.raku.org">Raku Design Docs (dated)</a><br />
<a href="http://docs.raku.org">Raku Docs</a><br />
<a href="https://learnxinyminutes.com/docs/raku/">Learn Raku in Y Minutes</a><br />
<a href="https://modules.raku.org">Raku modules</a><br />
<a href="https://rosettacode.org/wiki/Category:Raku">Rosetta Code examples</a><br />
<a href="http://examples.perl6.org/categories/euler.html">Project Euler examples</a><br />
<a href="http://examples.perl6.org">Perl 6 Examples</a><br />
<a href="https://github.com/Raku/roast">Raku Roast (test suite examples)</a></p>
</div>

</div> <!-- sidebar -->

<div id="content">

<i>Update for April 2017: <code>indir</code> is now a <a href="https://docs.perl6.org/routine/indir">documented part of the language</a>.</i>

How many times have I wanted to change the current working directory for just one block? It's usually such a pain because I have to remember to change it back. <!--more-->

In Perl 6, the <code>indir</code> routine does this for me:

<pre class="brush:plain">
indir $some_dir, {
    ...; # do stuff in that directory
    }
</pre>

The current working directory is changed just for that block of code. When that block is done, the value is back to whatever it was before. That this is built into the language is quite pleasing to me (and the dependency-adverse contexts I tend to work in). There's no variable to mess with (in Perl 6 that would be <code>$*CWD</code>, which has some issues at the moment) and it reads nicely as a sentence.

This isn't documented yet (it only shows up in <a href="https://raw.githubusercontent.com/perl6/specs/master/S16-io.pod">Synopsis 16</a>, last changed 10 years ago, and was <a href="https://github.com/rakudo/rakudo/blob/beec02a6fa69e3ac290b4dd24c07d87a9f248b13/docs/announce/2014.10.md">announced as part of 2014.10</a>), but it's in there and it mostly works. At the moment (Rakudo 2016.11) it only works when the target directory is readable <i>and</i> writeable, but I've filed <a href="https://rt.perl.org/Ticket/Display.html?id=130460">RT #130460</a> about that. And, I've filed <a href="https://github.com/perl6/doc/issues/1091">GitHub #1091</a> about the lack of documentation (which depends on someone declaring what it should actually do). Since it's untested and undocumented, that means it might change or disappear. Consider that before you get too excited. But, how can you not get excited about something that makes common things really easy?

I feel a little bad that I'm not stopping to fully investigate these corner cases, but if I did that I'd never get any writing done for <i>Learning Perl 6</i>! Maybe someone else has the time to make this bit of Perl 6 tested and documented.


</div> <!-- content -->

</div> <!-- middle -->

<div id="bottom">
This is the bottom stuff
</div>
<!-- bottom -->

</div> <!-- page_div -->
</body>

</html>

<!-- end post -->

